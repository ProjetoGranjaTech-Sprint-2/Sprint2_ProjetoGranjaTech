<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro - GranjaTech</title>
    <link rel="stylesheet" href="cadastro.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
</head>

<body>
    <div class="container" id="div_dados">

        <div class="img-galinha">
            <img src="../imagens/imagem logado.png">
        </div>

        <div class="form">

            <div class="form-header">
                <h2>Dados</h2>
                <a href="login.html" class="a-entrar">Entrar</a>
            </div>

            <section class="cadastro">
                <div class="input-grupo">


                    <div class="input-box">
                        <span style="color: white;"> <span style="color: red;">*</span> Nome Empresarial </span> <input
                            class="input" type="text" id="input_nome_empresarial" placeholder="Nome Empresarial"><br>
                        <br>
                    </div>


                    <div class="input-box">
                        <span style="color: white;"> <span style="color: red;">*</span> Nome Fantasia </span> <input
                            class="input" type="text" id="input_nome_fantasia" placeholder="Nome Fantasia"> <br> <br>
                    </div>


                    <div class="input-box">
                        <span style="color: white;"><span style="color: red;">* </span> CNPJ </span> <input
                            class="input" id="input_cnpj" placeholder="CNPJ">
                        <br><br>
                    </div>


                    <div class="input-box">
                        <span style="color: white;"><span style="color: red;">*</span> E-mail</span> <input
                            class="input" type="email" id="input_email" placeholder="Email"><br><br>
                    </div>


                    <div class="input-box" onkeydown="checkEnter(event)">
                        <span style="color: white;"><span style="color: red;">* </span> Senha</span><input class="input"
                            type="password" id="input_senha" class="material-symbols-outlined" placeholder="Senha">
                        <button onclick="mostrar()" class="material-symbols-outlined"
                            id="olhinho">visibility</button><br>
                    </div>


                    <div class="input-box">
                        <span style="color: white;"><span style="color: transparent;">*</span> Telefone</span>
                        <input class="input" type="number" id="input_telefone" placeholder="Telefone"
                            onkeydown="checkEnter(event)"><br><br>
                    </div>


                    <button onclick="prosseguir()" id="continuar-botao">Prosseguir</button>
                    <br><br>
                </div>
            </section>
        </div>

        <div id="res"></div>

    </div>
</body>

</html>

<script>
    var nome_empresarial = input_nome_empresarial.value;
    var nome_fantasia = input_nome_fantasia.value;
    var cnpj = input_cnpj.value;
    var email = input_email.value;
    var senha = input_senha.value;
    var telefone = input_telefone.value;

    function mostrar() {
        senha = input_senha.value;
        senha = document.getElementById("input_senha")

        if (senha.type == "password") {
            senha.type = "text"
        } else {
            senha.type = "password"
        }
    }
    function prosseguir() {
        nome_empresarial = input_nome_empresarial.value;
        nome_fantasia = input_nome_fantasia.value;
        cnpj = input_cnpj.value;
        email = input_email.value;
        senha = input_senha.value;
        telefone = input_telefone.value;

        if (nome_empresarial == "") {
            alert(`Por favor, preencha o campo "Nome Empresarial (Responsável/Empresário)".`)
        } else {
            if (nome_fantasia == "") {
                alert(`Por favor, preencha o campo "Nome Fantasia".`)
            } else {
                res.innerHTML = "";
                if (cnpj == "") {
                    alert(`Por favor, preencha o campo "CNPJ".`)
                } else if (cnpj.length >= 14 & cnpj.length <= 18) {
                    if (email == "") {
                        alert(`Por favor, preencha o campo "Email".`)
                    } else if (email.indexOf('.com') >= 0) {
                        var possuiEmailVálido =
                            email.indexOf('@gmail') >= 0 ||
                            email.indexOf('@hotmail') >= 0 ||
                            email.indexOf('@outlook') >= 0;

                        if (possuiEmailVálido) {
                            if (senha == "") {
                                alert(`Por favor, preencha o campo "Senha".`)
                            } else if (senha.length >= 10) {
                                var possui_especial =
                                    senha.indexOf('#') >= 0 ||
                                    senha.indexOf('@') >= 0 ||
                                    senha.indexOf('!') >= 0 ||
                                    senha.indexOf('%') >= 0 ||
                                    senha.indexOf('$') >= 0 ||
                                    senha.indexOf('&') >= 0 ||
                                    senha.indexOf('*') >= 0;

                                if (possui_especial) {

                                    const nome_emp = document.getElementById("input_nome_empresarial").value;
                                    const nome_fant = document.getElementById("input_nome_fantasia").value;
                                    const cnpj_ = document.getElementById("input_cnpj").value;
                                    const email_ = document.getElementById("input_email").value;
                                    const telefone_ = document.getElementById("input_telefone").value;


                                    localStorage.setItem("input_nome_empresarial", nome_emp);
                                    localStorage.setItem("input_nome_fantasia", nome_fant);
                                    localStorage.setItem("input_cnpj", cnpj_);
                                    localStorage.setItem("input_email", email_);
                                    localStorage.setItem("input_telefone", telefone_);

                                    window.location.href = "cadastro2.html";

                                } else {
                                    alert(`Sua senha não contém caracteres especiais! Por favor, insira uma senha com um ou mais caracteres especiais (!, @, #, $, %, &, *).`)
                                }
                            } else {
                                alert(`Senha com quantidade de caracteres inválido! Por favor, insira uma senha com 10 ou mais caracteres.`)
                            }
                        } else {
                            alert(`Email inválido - Insira um email que tenha um dos seguintes endereços: "@outlook", "@gmail" ou "@hotmail"`)

                        }
                    } else {
                        alert(`Email inválido!`)
                    }
                } else {
                    alert(`CNPJ inválido!`)
                }
            }
        }
    }
    function checkEnter(event) {
        if (event.key === "Enter") {
            prosseguir();
        }
    }
</script>